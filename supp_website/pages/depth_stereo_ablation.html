<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="lt-ie10" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<title>Consistent Video Depth Estimation - Supplementary Material</title>
	<link href="css/foundation.css" rel="stylesheet" type="text/css" />
	<link href="css/twentytwenty.css" rel="stylesheet" type="text/css" />
	<!-- jQuery -->
	<script
		src="https://code.jquery.com/jquery-3.1.0.min.js"
		integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s="
		crossorigin="anonymous"></script>
	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-xs-12 text-center">
				<br>
				<h1>Consistent Video Depth Estimation</h1>
				<br>
			</div>
		</div>
		<br>
		<div class="row">
			<div class="col-xs-12 text-left">
				<a href="../index.html">
					<button type="button" class="btn btn-link">
						<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Back to previous page
					</button>
				</a>
				<br>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 text-left">
				<h3>Ablation study</h3>
				<hr>
				<div class="well well-sm">
					<form class="form-inline">
						<div class="form-group">
							<label for="frame-idx-input">Sequence <span id="frame-idx">1</span> / <span id="frame-total"></span>&nbsp;</label>
							<span id="sequence_name" style="display:inline-block; font-weight:bold; width:200px;">: Chess &nbsp;</span>
							<div class="input-group">
								<span class="input-group-btn">
									<button class="btn btn-info" type="button" onclick="PrevFrame();"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></button>
								</span>
								<input type="range" class="form-control" id="frame-idx-input" min="1" max="7" step="1" value="1" oninput="ChangeFrame();">
								<span class="input-group-btn">
									<button class="btn btn-info" type="button" onclick="NextFrame();"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></button>
								</span>
							</div>
						</div>
					</form>
					<hr style="margin: 7px;">
					<h5><strong>Method:&nbsp;</strong></h5>
					<ul class="nav nav-pills" id="current-view-ul">
						<li role="presentation" id="tab0" class="active"><a href="javascript: void(0);" onclick="ClickInput();">Input video</a></li>
						<li role="presentation" id="tab1"><a href="javascript: void(0);" onclick="ChangeCurrentView(1);">Our result</a></li>
						<li role="presentation" id="tab2"><a href="javascript: void(0);" onclick="ChangeCurrentView(2);">w/o disparity loss</a></li>
						<li role="presentation" id="tab3"><a href="javascript: void(0);" onclick="ChangeCurrentView(3);">w/o spatial loss</a></li>
						<li role="presentation" id="tab4"><a href="javascript: void(0);" onclick="ChangeCurrentView(4);">w/o scale calibration</a></li>
						<li role="presentation" id="tab5"><a href="javascript: void(0);" onclick="ChangeCurrentView(5);">w/o overlap test</a></li>
						<li role="presentation" id="tab6"><a href="javascript: void(0);" onclick="ChangeCurrentView(6);">w/o long-term constraints</a></li>
					</ul>
				</div>
			</div>

			<div class="row" style="margin-top: 2em" id='output_canvas'>
			  <div class="large-12 columns">
			  <div style = text-align:center>
			    <video autoplay muted playsinline id="output_video" width="600" controls="controls" onended="this.currentTime = 0; this.play();" 
				src="../results/ablation/chess/color.mp4" type="video/mp4">
			    	<source src="../results/ablation/chess/color.mp4" type="video/mp4">
				</video>
			  </div>
			  </div>
				<center><h5 id="method_author">&nbsp;</h5></center>
				<center><h5 id="method_title" style="font-weight:bold">Input video </h5></center>
				<center><h5 id="method_publication">&nbsp;</h5></center>
    			<center><h5 id="method_remarks"><br />&nbsp;</h5></center>
				<center><h5><a id="code_link">&nbsp;</a></h5></center>
			   <strong><center><h5 id="video-caption">&nbsp;</h5></center></strong>
			</div>
			<br>
			<br>
		</div>
	</div>

	<script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>
    <script src="js/jquery.event.move.js"></script>
    <script src="js/jquery.twentytwenty.js"></script>
    <script>
    $(function(){
      $(".twentytwenty-container[data-orientation!='vertical']").twentytwenty({default_offset_pct: 0.7});
      $(".twentytwenty-container[data-orientation='vertical']").twentytwenty({default_offset_pct: 0.3, orientation: 'vertical'});
    });
    </script>

	<style type="text/css">
.container {
	background-color: #FBFBFC;
}
.teaser-img {
	margin-top: 5px;
	margin-bottom: 5px;
}
.img-responsive {
	margin: auto;
}
.comparison-table {
	table-layout: fixed;
		word-wrap: break-word;
}
.comparison-table th {
	text-align: center;
}
.disabled{
    pointer-events:none;
    opacity:0.7;
}
.row{
	min-width: 1060px;
}
	</style>

	<script type="text/javascript">
	var dataset = "Stereo"
	<!-- var types  = ["color", "Stereo", "COLMAP", "MC", "MiDaS_v2", "WSVD", "NeuralRGBD", "Ours"]; -->
	var types  = ["color", "Ours", "no_disparity_loss", "no_spatial_loss", "no_scale_calibration", "no_overlap_test",    "consecutive"];
	var currentView = "color";
	var image_nameing = ["chess", "guitars", "sofa_pair", "tree"];
	<!-- Update the video name here -->

	function ChangeFrame(){

	var frame_idx = parseInt(document.getElementById("frame-idx-input").value);
	document.getElementById("frame-idx").innerHTML = frame_idx;
	document.getElementById("sequence_name").innerHTML = ": " + image_nameing[frame_idx-1].toUpperCase()+"&nbsp;";

	var video = document.getElementById('output_video');
	var timestamp = video.currentTime;
	var wasPaused = video.paused;
	var method_name = dataset
	video.src = "../results/ablation/"+image_nameing[frame_idx-1]+ "/" + currentView +".mp4";
	video.currentTime = timestamp;
	if (wasPaused) {
		video.pause();
	} else {
		video.play();
	}

	console.log("Change src to: " + video.src);
	}

	function NextFrame(){
		var frame_total = image_nameing.length;
		var frame_idx = parseInt(document.getElementById("frame-idx-input").value);
		if(frame_idx < frame_total){
			document.getElementById("frame-idx-input").value = frame_idx + 1;
			ChangeFrame();
		}

	}

	function PrevFrame(){
		var frame_idx = parseInt(document.getElementById("frame-idx-input").value);
		if(frame_idx > 1){
			document.getElementById("frame-idx-input").value = frame_idx - 1;
			ChangeFrame();
		}
	}

	function ChangeCurrentView(idx){
	    var li_list = document.getElementById("current-view-ul").children;
		console.log(idx);
		console.log(li_list);
		for(i = 0; i < li_list.length; i++){
			li_list[i].className = "";
		}
		li_list[idx].className = "active";
		currentView = types[idx];
		document.getElementById("output_canvas").style.display = 'block';
		var frame_idx = parseInt(document.getElementById("frame-idx-input").value);

		document.getElementById("video-caption").innerHTML = "&nbsp;";
		if(idx == 0){ // color
			document.getElementById("method_title").innerHTML = "Input video";
		}
		if(idx == 1){ // Ours
			document.getElementById("method_title").innerHTML = "Our result";
		}
		if(idx == 2){ // no_disparity_loss
			document.getElementById("method_title").innerHTML = "Without disparity loss";
		}
		if(idx == 3){ // no_spatial_loss
			document.getElementById("method_title").innerHTML = "Without spatial loss";
		}
		if(idx == 4){ // no_scale_calibration
			document.getElementById("method_title").innerHTML = "Without applying scale calibration";
		}
		if(idx == 5){ // no_overlap_test
			document.getElementById("method_title").innerHTML = "Without using overlap test";
		}
		if(idx == 6){ // consecutive
			document.getElementById("method_title").innerHTML = "Without using long-term constraints";
		}
		ChangeFrame();
	}

	function ClickInput(){
	    var frame_idx = parseInt(document.getElementById("frame-idx-input").value);

		document.getElementById("video-caption").innerHTML = "";
		document.getElementById("method_author").innerHTML = "&nbsp";
		document.getElementById("method_title").innerHTML = "Input";
		document.getElementById("method_publication").innerHTML = "&nbsp";
		document.getElementById("method_remarks").innerHTML = "&nbsp" + "<br />" + "&nbsp";
		document.getElementById("code_link").href = "";
		document.getElementById("code_link").innerHTML = "";
		idx = 0;
		currentView = types[idx];
		var li_list = document.getElementById("current-view-ul").children;
		console.log(idx);
		console.log(li_list);
		for(i = 0; i < li_list.length; i++){
			li_list[i].className = "";
		}
		li_list[idx].className = "active";
		document.getElementById("output_canvas").style.display = 'block';
		ChangeFrame();

	}

	$(window).on('load', function() {

		var frame_total = image_nameing.length;
		document.getElementById("frame-total").innerHTML = frame_total;
		document.getElementById("frame-idx-input").value = 1;
		document.getElementById("frame-idx-input").max = frame_total;

		// ClickInput();
	});



	</script>


</body>
</html>
